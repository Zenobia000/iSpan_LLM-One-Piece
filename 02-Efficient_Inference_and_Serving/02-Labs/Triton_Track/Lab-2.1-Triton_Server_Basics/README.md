# Lab-2.1: Triton Inference Server åŸºç¤èˆ‡æ¨¡å‹éƒ¨ç½²

## ğŸ¯ å¯¦é©—å®¤æ¦‚è¿°

æœ¬å¯¦é©—å®¤ä»‹ç´¹ **NVIDIA Triton Inference Server**ï¼Œæ¥­ç•Œé ˜å…ˆçš„ä¼æ¥­ç´šæ¨ç†æœå‹™å™¨ã€‚æ‚¨å°‡å­¸ç¿’å¾å®‰è£é…ç½®åˆ°æ¨¡å‹éƒ¨ç½²çš„å®Œæ•´æµç¨‹ï¼ŒæŒæ¡å¤šæ¨¡å‹çµ±ä¸€ç®¡ç†çš„æ ¸å¿ƒæŠ€èƒ½ã€‚

**ç‚ºä»€éº¼é¸æ“‡ Tritonï¼Ÿ**
- ğŸ¢ **ä¼æ¥­ç´šæ¨™æº–**: NVIDIA å®˜æ–¹æ¨ç†è§£æ±ºæ–¹æ¡ˆï¼Œè¢« Netflixã€PayPalã€VISA ç­‰ä¼æ¥­å»£æ³›ä½¿ç”¨
- ğŸ”§ **å¤š Backend æ”¯æ´**: PyTorchã€TensorRTã€ONNXã€Pythonã€vLLM çµ±ä¸€ç®¡ç†
- âš¡ **é«˜æ€§èƒ½**: å‹•æ…‹æ‰¹æ¬¡è™•ç†ã€GPU å„ªåŒ–ã€ä¸¦ç™¼æ¨ç†
- ğŸ“Š **å®Œå–„ç›£æ§**: å…§å»ºè±å¯ŒæŒ‡æ¨™ï¼Œä¼æ¥­ç´šå¯è§€æ¸¬æ€§

## ğŸ“ å­¸ç¿’ç›®æ¨™

å®Œæˆæœ¬å¯¦é©—å®¤å¾Œï¼Œæ‚¨å°‡èƒ½å¤ ï¼š
- âœ… å®‰è£å’Œé…ç½® Triton Inference Server
- âœ… è¨­è¨ˆå’Œç®¡ç†æ¨¡å‹å€‰åº« (Model Repository)
- âœ… éƒ¨ç½² PyTorch æ¨¡å‹åˆ° Triton
- âœ… é…ç½®å‹•æ…‹æ‰¹æ¬¡è™•ç†å„ªåŒ–æ€§èƒ½
- âœ… å¯¦æ–½åŸºç¤ç›£æ§å’Œå¥åº·æª¢æŸ¥
- âœ… é€²è¡Œæ€§èƒ½åŸºæº–æ¸¬è©¦å’Œèª¿å„ª

## ğŸ“š å¯¦é©—å®¤çµæ§‹ (4å€‹éšæ®µ)

### ğŸ“– 01-Triton_Setup_and_Installation.ipynb
**é‡é»**: Triton åŸºç¤ç’°å¢ƒå»ºç½®
**æ™‚é•·**: 60-90 åˆ†é˜

**å­¸ç¿’å…§å®¹**:
- Triton Server å®‰è£èˆ‡é©—è­‰
- Docker å®¹å™¨åŒ–éƒ¨ç½²
- åŸºç¤é…ç½®èˆ‡æœå‹™å•Ÿå‹•
- REST å’Œ gRPC API ä»‹ç´¹
- å¥åº·æª¢æŸ¥ç«¯é»æ¸¬è©¦

**æŠ€è¡“æ£§**:
- NVIDIA Triton Inference Server
- Docker å®¹å™¨åŒ–
- curl/httpx API æ¸¬è©¦
- åŸºç¤ç›£æ§è¨­ç½®

### ğŸ—ï¸ 02-Model_Repository_Design.ipynb
**é‡é»**: æ¨¡å‹å€‰åº«è¨­è¨ˆèˆ‡é…ç½®
**æ™‚é•·**: 60-90 åˆ†é˜

**å­¸ç¿’å…§å®¹**:
- Model Repository æ¶æ§‹è¨­è¨ˆ
- æ¨¡å‹é…ç½®æ–‡ä»¶ (`config.pbtxt`) ç·¨å¯«
- ç‰ˆæœ¬ç®¡ç†ç­–ç•¥
- æ¨¡å‹è¼‰å…¥èˆ‡å¸è¼‰
- å‹•æ…‹æ‰¹æ¬¡è™•ç†é…ç½®

**æŠ€è¡“é‡é»**:
- Model Repository æœ€ä½³å¯¦è¸
- é…ç½®æ–‡ä»¶èªæ³•èˆ‡åƒæ•¸èª¿å„ª
- ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥
- è¨˜æ†¶é«”ç®¡ç†

### âš¡ 03-PyTorch_Backend_Deployment.ipynb
**é‡é»**: PyTorch æ¨¡å‹éƒ¨ç½²èˆ‡å„ªåŒ–
**æ™‚é•·**: 90-120 åˆ†é˜

**å­¸ç¿’å…§å®¹**:
- PyTorch æ¨¡å‹è½‰æ›èˆ‡éƒ¨ç½²
- TorchScript å„ªåŒ–
- å‹•æ…‹æ‰¹æ¬¡é…ç½®èª¿å„ª
- æ¨ç†æ€§èƒ½æ¸¬è©¦
- èˆ‡ HuggingFace æ€§èƒ½å°æ¯”

**å¯¦è¸é …ç›®**:
- éƒ¨ç½² Llama-2-7B æ¨¡å‹
- é…ç½®æœ€ä½³æ‰¹æ¬¡è™•ç†åƒæ•¸
- æ¸¬é‡å»¶é²å’Œååé‡æŒ‡æ¨™
- è¨˜æ†¶é«”ä½¿ç”¨åˆ†æ

### ğŸ“Š 04-Monitoring_and_Performance.ipynb
**é‡é»**: ç›£æ§ç³»çµ±èˆ‡æ€§èƒ½åˆ†æ
**æ™‚é•·**: 60-90 åˆ†é˜

**å­¸ç¿’å…§å®¹**:
- Triton å…§å»ºæŒ‡æ¨™ç³»çµ±
- Prometheus æ•´åˆé…ç½®
- æ€§èƒ½ç“¶é ¸åˆ†æ
- è³‡æºåˆ©ç”¨ç‡å„ªåŒ–
- åŸºç¤å‘Šè­¦è¨­ç½®

**ç›£æ§æŒ‡æ¨™**:
- æ¨ç†å»¶é² (TTFT, ITL)
- ååé‡ (RPS, TPS)
- è³‡æºåˆ©ç”¨ (GPU, Memory)
- éŒ¯èª¤ç‡èˆ‡å¯ç”¨æ€§

## ğŸ› ï¸ æŠ€è¡“è¦æ±‚

### ç¡¬é«”éœ€æ±‚
- **GPU**: 16GB+ VRAM (RTX 4080, A10G æˆ–æ›´é«˜)
- **RAM**: 32GB+ ç³»çµ±è¨˜æ†¶é«”
- **å­˜å„²**: 50GB+ å¯ç”¨ç©ºé–“
- **ç¶²è·¯**: ç©©å®šç¶²è·¯é€£ç·š (æ¨¡å‹ä¸‹è¼‰)

### è»Ÿé«”ç’°å¢ƒ
```bash
# NVIDIA Container Toolkit
nvidia-container-toolkit

# Docker (with GPU support)
docker >= 20.10

# Python ç’°å¢ƒ
python >= 3.8
tritonclient[all] >= 2.40

# å¯é¸å·¥å…·
curl, httpx, locust (è² è¼‰æ¸¬è©¦)
```

### é å‚™çŸ¥è­˜
- âœ… **å®Œæˆç¬¬ä¸€ç« **: PEFT è¨“ç·´èˆ‡å„ªåŒ–æŠ€è¡“
- âœ… **Docker åŸºç¤**: å®¹å™¨åŒ–æ¦‚å¿µèˆ‡æ“ä½œ
- âœ… **REST API æ¦‚å¿µ**: HTTP å”è­°èˆ‡ API è¨­è¨ˆ
- âœ… **PyTorch åŸºç¤**: æ¨¡å‹è¼‰å…¥èˆ‡æ¨ç†

## ğŸš€ å¿«é€Ÿé–‹å§‹

```bash
# 1. æ¿€æ´»ç’°å¢ƒ
cd /path/to/00-Course_Setup
source .venv/bin/activate

# 2. å®‰è£ Triton å®¢æˆ¶ç«¯
pip install tritonclient[all]

# 3. æ‹‰å– Triton Server æ˜ åƒ
docker pull nvcr.io/nvidia/tritonserver:24.07-py3

# 4. é€²å…¥å¯¦é©—å®¤
cd ../02-Efficient_Inference_and_Serving/02-Labs/Lab-2.1-Triton_Server_Basics

# 5. å•Ÿå‹• Jupyter Lab
jupyter lab
```

## ğŸ“ˆ é æœŸå­¸ç¿’æˆæœ

### æŠ€è¡“æŠ€èƒ½
- **Triton éƒ¨ç½²**: æŒæ¡ä¼æ¥­ç´šæ¨ç†æœå‹™å™¨éƒ¨ç½²
- **æ¨¡å‹ç®¡ç†**: ç†è§£å¤šæ¨¡å‹çµ±ä¸€ç®¡ç†æ¶æ§‹
- **æ€§èƒ½èª¿å„ª**: å„ªåŒ–å‹•æ…‹æ‰¹æ¬¡è™•ç†åƒæ•¸
- **ç›£æ§é‹ç¶­**: å»ºç«‹å®Œæ•´çš„ç›£æ§é«”ç³»

### æ¥­ç•Œæ‡‰ç”¨
- **ä¼æ¥­ AI å¹³å°**: æ§‹å»ºçµ±ä¸€çš„æ¨¡å‹æœå‹™å¹³å°
- **MLOps å·¥ç¨‹å¸«**: æ¨ç†æœå‹™çš„é‹ç¶­ç®¡ç†
- **æ€§èƒ½å„ªåŒ–**: ä¼æ¥­ç´šæ¨ç†æ€§èƒ½èª¿å„ª
- **ç³»çµ±æ¶æ§‹**: å¤§è¦æ¨¡ AI æœå‹™è¨­è¨ˆ

## ğŸŒŸ å¯¦é©—å®¤ç‰¹è‰²

### 1. ä¼æ¥­ç´šå¯¦è¸å°å‘
- ä½¿ç”¨ Netflixã€PayPal ç­‰ä¼æ¥­çš„çœŸå¯¦æ¶æ§‹æ¨¡å¼
- æ¶µè“‹å¾é–‹ç™¼åˆ°ç”Ÿç”¢çš„å®Œæ•´æµç¨‹
- åŒ…å«æ•…éšœæ’é™¤èˆ‡é‹ç¶­æœ€ä½³å¯¦è¸

### 2. å®Œæ•´æŠ€è¡“æ£§è¦†è“‹
- **æ¨ç†å¼•æ“**: Triton Server æ·±åº¦è§£æ
- **å®¹å™¨åŒ–**: Docker å„ªåŒ–èˆ‡éƒ¨ç½²
- **API è¨­è¨ˆ**: REST/gRPC é›™å”è­°æ”¯æ´
- **ç›£æ§é‹ç¶­**: Prometheus ä¼æ¥­ç´šç›£æ§

### 3. æ¼¸é€²å¼å­¸ç¿’è¨­è¨ˆ
- å¾ç°¡å–®æ¨¡å‹é–‹å§‹ï¼Œé€æ­¥å¢åŠ è¤‡é›œåº¦
- æ¯å€‹éšæ®µéƒ½æœ‰æ˜ç¢ºçš„å­¸ç¿’æª¢æŸ¥é»
- åŒ…å«è±å¯Œçš„ç·´ç¿’èˆ‡å»¶ä¼¸æ€è€ƒ

## ğŸ”— èˆ‡å…¶ä»–å¯¦é©—å®¤çš„éŠœæ¥

### å‰ç½®ä¾è³´
- **Lab-1.1 åˆ° Lab-1.8**: PEFT è¨“ç·´çš„æ¨¡å‹å°‡ç”¨æ–¼ Triton éƒ¨ç½²
- **ç¬¬ä¸€ç« ç†è«–**: åˆ†æ•£å¼è¨“ç·´ã€å„ªåŒ–æŠ€è¡“çš„ç†è«–åŸºç¤

### å¾ŒçºŒå¯¦é©—å®¤é è¦½
- **Lab-2.2**: å¤šæ¨¡å‹ç®¡ç† (A/B æ¸¬è©¦ã€ç‰ˆæœ¬æ§åˆ¶)
- **Lab-2.3**: Backend æ•´åˆ (TensorRTã€vLLMã€è‡ªå®šç¾©)
- **Lab-2.4**: ä¼æ¥­ç´šåŠŸèƒ½ (æ¨¡å‹çµ„åˆã€é«˜ç´šèª¿å„ª)
- **Lab-2.5**: ç”Ÿç”¢ç’°å¢ƒ (Kubernetesã€CI/CDã€é‹ç¶­)

## ğŸ“š åƒè€ƒè³‡æº

### å®˜æ–¹æ–‡æª”
- [Triton Inference Server](https://github.com/triton-inference-server/server)
- [NVIDIA Triton Documentation](https://docs.nvidia.com/deeplearning/triton-inference-server/)
- [Model Repository Guide](https://github.com/triton-inference-server/server/blob/main/docs/user_guide/model_repository.md)

### ä¼æ¥­æ¡ˆä¾‹
- [Netflix çš„ Triton éƒ¨ç½²ç¶“é©—](https://netflixtechblog.com/how-netflix-uses-triton-inference-server-to-serve-ml-models-at-scale-4aaa0c7bfce)
- [PayPal ML Platform](https://medium.com/paypal-tech/paypal-machine-learning-platform-9b8dd4b75c1)

### æŠ€è¡“è«–æ–‡
- "Triton Inference Server: Optimizing Deep Learning Inference" (NVIDIA Technical Paper)
- "Dynamic Batching for Production Machine Learning" (MLSys 2022)

## ğŸ¯ æˆåŠŸè©•ä¼°æ¨™æº–

### åŸºç¤è¦æ±‚ (å¿…é ˆé”æˆ)
- [ ] æˆåŠŸå®‰è£ä¸¦å•Ÿå‹• Triton Server
- [ ] éƒ¨ç½²è‡³å°‘ä¸€å€‹ PyTorch æ¨¡å‹
- [ ] å®ŒæˆåŸºç¤æ¨ç†APIèª¿ç”¨æ¸¬è©¦
- [ ] é…ç½®åŸºæœ¬çš„å¥åº·æª¢æŸ¥

### é€²éšç›®æ¨™ (æ¨è–¦é”æˆ)
- [ ] å¯¦ç¾å‹•æ…‹æ‰¹æ¬¡è™•ç†å„ªåŒ–
- [ ] è¨­ç½® Prometheus ç›£æ§æ•´åˆ
- [ ] å®Œæˆæ€§èƒ½åŸºæº–æ¸¬è©¦
- [ ] å¯¦æ–½åŸºç¤æ•…éšœæ’é™¤

### å°ˆå®¶ç´šæŒ‘æˆ° (é¸æ“‡æ€§)
- [ ] éƒ¨ç½²å¤šå€‹æ¨¡å‹ç‰ˆæœ¬
- [ ] è‡ªå®šç¾©é…ç½®æ–‡ä»¶å„ªåŒ–
- [ ] å¯¦ç¾è² è¼‰æ¸¬è©¦è…³æœ¬
- [ ] è¨­è¨ˆç›£æ§å„€è¡¨æ¿

---

**ç‰ˆæœ¬**: v1.0 (Triton-focused redesign)
**å‰µå»ºæ—¥æœŸ**: 2025-10-09
**é ä¼°æ•™å­¸æ™‚é–“**: 4-6 å°æ™‚
**é›£åº¦ç­‰ç´š**: â­â­â­ (Intermediate)
**å„ªå…ˆç´š**: ğŸ”´ P0 (æœ€é«˜)

**æ³¨æ„**: æœ¬å¯¦é©—å®¤ä»£è¡¨ç¬¬äºŒç« çš„é‡å¤§æ¶æ§‹è½‰è®Šï¼Œå¾ vLLM å–®ä¸€å¼•æ“è½‰å‘ Triton ä¼æ¥­ç´šå¤šæ¨¡å‹ç®¡ç†å¹³å°ã€‚